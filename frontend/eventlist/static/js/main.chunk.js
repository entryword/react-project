(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,a){e.exports=a(366)},161:function(e,t,a){},359:function(e,t,a){},361:function(e,t,a){},363:function(e,t,a){},366:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(13),i=a.n(r),c=(a(161),a(152)),s=a(17),o=a(3),m=a(4),d=a(6),h=a(5),f=a(7),u=a(24),p=a.n(u),v=a(8),E=a.n(v);var k=function(e){return l.a.createElement("input",{type:"text",className:"form-control search-query",onChange:e.onChange,id:"query",value:e.value,placeholder:e.placeholder||"\u4e3b\u984c/\u95dc\u9375\u5b57/\u540d\u5b57",maxLength:"30"})};for(var y=function(e){return l.a.createElement("select",{id:"momth",className:"form-control search-month",value:e.value,onChange:e.onChange,onBlur:e.onBlur,disabled:e.disabledTime},l.a.createElement("option",{key:"1",value:"1"},"1"),l.a.createElement("option",{key:"2",value:"2"},"2"),l.a.createElement("option",{key:"3",value:"3"},"3"),l.a.createElement("option",{key:"4",value:"4"},"4"),l.a.createElement("option",{key:"5",value:"5"},"5"),l.a.createElement("option",{key:"6",value:"6"},"6"),l.a.createElement("option",{key:"7",value:"7"},"7"),l.a.createElement("option",{key:"8",value:"8"},"8"),l.a.createElement("option",{key:"9",value:"9"},"9"),l.a.createElement("option",{key:"10",value:"10"},"10"),l.a.createElement("option",{key:"11",value:"11"},"11"),l.a.createElement("option",{key:"12",value:"12"},"12"))},b=(new Date).getFullYear(),O=[],g=2015;g<=b;g++)O.push(g);var N=function(e){return l.a.createElement("select",{className:"form-control search-year",id:"year",value:e.value,onChange:e.onChange,onBlur:e.onBlur,disabled:e.disabledTime},">",O.map(function(e){return l.a.createElement("option",{key:e,value:e},e)}))},w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={time:"false"===new URL(window.location.href).searchParams.get("m")?"all":"period",disabledTime:"false"===new URL(window.location.href).searchParams.get("m")},a.handleSwitchSearch=function(e){var t=e.target.value;a.setState({time:t,disabledTime:"all"===t})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.viewOptionOpen&&(t.time="period",t.disabledTime=!1),!0}},{key:"render",value:function(){var e=this.props,t=e.handleQueryChange,a=e.handleYearChange,n=e.handleMonthChange,r=e.handleFind,i=e.handdleSearchAll,c=e.keyword,s=e.year,o=e.month,m=e.viewOptionOpen,d=this.state.disabledTime;return l.a.createElement("div",{className:"search-box"},l.a.createElement("div",{className:"search-label"},"\u641c\u5c0b"),l.a.createElement(k,{value:c,onChange:t}),l.a.createElement("div",{className:"search-label-year-month"},l.a.createElement("div",{className:"form-check form-check-inline"},l.a.createElement("input",{type:"radio",id:"time-period",className:"form-check-input",name:"time",value:"period",checked:"period"===this.state.time,onChange:this.handleSwitchSearch}),l.a.createElement("label",{className:"form-check-label",htmlFor:"time-period"},"\u5e74\u4efd-\u6708\u4efd")),l.a.createElement("div",{className:"form-check form-check-inline"},l.a.createElement("input",{type:"radio",id:"time-all",className:"form-check-input",name:"time",value:"all",checked:"all"===this.state.time,disabled:m,onChange:this.handleSwitchSearch}),l.a.createElement("label",{className:"form-check-label",htmlFor:"time-all"},"\u5168\u90e8\u6642\u9593",d))),l.a.createElement(N,{value:s,onChange:a,onBlur:a,disabledTime:d}),l.a.createElement(y,{value:o,onChange:n,onBlur:n,disabledTime:d}),l.a.createElement("div",{className:"search-button"},"period"===this.state.time&&l.a.createElement("button",{className:"btn pyladies-btn",onClick:r},l.a.createElement("span",{className:"text"},"\u641c\u5c0b\u6d3b\u52d5")," ",l.a.createElement("i",{className:"fa fa-search"})),"all"===this.state.time&&l.a.createElement("button",{className:"btn pyladies-btn",onClick:i},l.a.createElement("span",{className:"text"},"\u641c\u5c0b\u6d3b\u52d5")," ",l.a.createElement("i",{className:"fa fa-search"}))))}}]),t}(n.Component),j=a(96),C=a.n(j),F=(a(358),document.getElementById("modal")),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).el=document.createElement("div"),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){F.hasChildNodes()&&F.removeChild(F.lastChild),F.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){F.hasChildNodes()&&F.removeChild(F.lastChild)}},{key:"render",value:function(){return Object(r.createPortal)(this.props.children,this.el)}}]),t}(l.a.Component),D=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onNavigate,a=e.date,n=E()(a).format("YYYY-MM"),r=E()(E()(a).toDate()).subtract(1,"month").format("YYYY-MM"),i=E()(E()(a).toDate()).add(1,"month").format("YYYY-MM"),c=function(){t("PREV")},s=function(){t("NEXT")};return l.a.createElement("div",{className:"calendar-toolbar"},l.a.createElement("span",{className:"calendar-nav",onClick:c},r),l.a.createElement("i",{className:"fa fa-angle-left",onClick:c}),l.a.createElement("span",{className:"calendar-now"},n),l.a.createElement("i",{className:"fa fa-angle-right",onClick:s}),l.a.createElement("span",{className:"calendar-nav",onClick:s}," ",i))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).processEventList=function(e){return e.map(function(e){return{id:e.event.id,title:e.event.title,start:E()("".concat(e.event.date," ").concat(e.event.start_time)).toDate(),end:E()("".concat(e.event.date," ").concat(e.event.start_time)).toDate(),date:e.event.date,start_time:e.event.start_time,end_time:e.event.end_time,field:e.event.field,place_info:e.event.place_info,status:e.event.status,time:e.event.time,weekday:e.event.weekday,topic:e.topic}})},a.handleDateClick=function(e){a.setState({selectedId:parseInt(e.currentTarget.dataset.id,10)})},a.toggleModal=function(){a.setState({selectedId:0})},a.onNavigate=function(e,t){a.props.handleCalendarDate(E()(e).format("YYYY-M"))},a.el=document.createElement("div"),a.state={defaultDate:E()().toDate(),selectedId:0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.events?this.processEventList(this.props.events.events):[],a=this.state,n=a.defaultDate,r=a.selectedId,i=E()("".concat(this.props.year,"-").concat(this.props.month)).toDate(),c=C.a.momentLocalizer(E.a);return l.a.createElement("div",{className:"calendar-view"},l.a.createElement("h2",{className:"search-result"},"\u5171 ",this.props.events.count," \u7b46\u641c\u5c0b\u7d50\u679c"),l.a.createElement(C.a,{popup:!0,localizer:c,events:t,views:["month"],step:30,startAccessor:"start",date:i,defaultDate:n,endAccessor:"end",onView:this.onView,onNavigate:this.onNavigate,components:{event:function(t){return l.a.createElement("div",{className:"eventCell"},l.a.createElement("div",{onClick:e.handleDateClick,"data-id":t.event.id},t.title),r===t.event.id&&l.a.createElement(S,null,l.a.createElement("h3",null,"\u6d3b\u52d5",l.a.createElement("button",{className:"modal-btn",onClick:e.toggleModal},l.a.createElement("i",{className:"fa fa-times"}))),l.a.createElement("h4",null,l.a.createElement("a",{href:"/events/event.html?id=".concat(t.event.id),rel:"noopener noreferrer",target:"_blank"},t.event.title)),l.a.createElement("p",{className:"modal-date"},t.event.date," ",t.event.start_time,"~",t.event.end_time),t.event.place_info&&l.a.createElement("p",{className:"modal-place"},"@ ",t.event.place_info.name)))},toolbar:D}}))}}]),t}(n.Component),R=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.events.events,t=this.props,a=t.definitions,n=t.order,r=t.handleOrder;return l.a.createElement("div",{className:"event-list-view"},l.a.createElement("h2",{className:"search-result"},"\u5171 ",this.props.events.count," \u7b46\u641c\u5c0b\u7d50\u679c",l.a.createElement("span",{className:"time-order",onClick:r},"asc"===n&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"\u958b\u59cb\u65e5\u671f \u904e\u53bb\u5230\u672a\u4f86"),l.a.createElement("i",{className:"fa fa-caret-up"})),"desc"===n&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"\u958b\u59cb\u65e5\u671f \u672a\u4f86\u5230\u904e\u53bb"),l.a.createElement("i",{className:"fa fa-caret-down"})))),e.map(function(e){return l.a.createElement("section",{className:"event-card",key:e.event.id},l.a.createElement("header",{className:"event-card-title"},l.a.createElement("h3",null,l.a.createElement("a",{href:"/events/topic.html?id=".concat(e.topic.id),rel:"noopener noreferrer",target:"_blank"},e.topic&&e.topic.name)),l.a.createElement("h2",null,l.a.createElement("a",{href:"/events/event.html?id=".concat(e.event.id),rel:"noopener noreferrer",target:"_blank"},e.event.title))),l.a.createElement("article",{className:"event-card-content"},l.a.createElement("p",{className:"date"},e.event.date," ",e.event.start_time," ~"," ",e.event.end_time,e.event.place_info&&" @ ".concat(e.event.place_info.name)),l.a.createElement("p",{className:"level"},a.level&&e.topic&&a.level[e.topic.level]),l.a.createElement("p",{className:"tags"},a.field&&e.event.field.map(function(e){return"#"+a.field[e]+" "}))))}))}}]),t}(n.Component),T=a(34),x=a(62),_=a(155),q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={status:{},time:{},level:{},field:{},weekday:{},close:{status:!1,time:!1,level:!1,field:!1,weekday:!1}},a.filterName=["status","time","level","field","weekday"],a.processFilter=function(){a.filterName.forEach(function(e){a.props.filters[e]=Object.keys(a.state[e]).reduce(function(t,n){return a.state[e][n]?[].concat(Object(_.a)(t),[n]):t},[])})},a.handleChange=function(e,t){var n=e.target,l=n.checked,r=n.name;a.setState(Object(T.a)({},t,Object(x.a)({},a.state[t],Object(T.a)({},r,l))),a.processFilter)},a.handleAccordion=function(e){a.setState({close:Object(x.a)({},a.state.close,Object(T.a)({},e,!a.state.close[e]))})},a.resetFilter=function(e){var t={};a.filterName.forEach(function(a){for(var n in t[a]={},e[a])t[a][n]=!1}),a.setState(Object(x.a)({},t))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.definitions,n=t.filterReset;a!==e.definitions&&this.resetFilter(a),n!==e.filterReset&&n&&this.resetFilter(a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.definitions,n=t.filterOpen,r=t.handleFiler,i=t.isTopicPage,c=t.isSpeakerPage,s=this.state,o=s.status,m=s.time,d=s.level,h=s.field,f=s.weekday,u=s.close;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"fitler-box"},l.a.createElement("div",{className:"filter-label"},"\u7be9\u9078\u5668"),l.a.createElement("div",null,l.a.createElement("span",{className:"filter-button",onClick:r},n?"Close":"Open",l.a.createElement("i",{className:"fa ".concat(n?"fa-caret-up":"fa-caret-down")})))),l.a.createElement("div",{className:"filter-container \n                        ".concat(n?"":"hide","  \n                        ").concat(i?"topic-filter":"","\n                        ").concat(c?"speaker-filter":"")},!i&&!c&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"filter-column"},l.a.createElement("div",{className:"filter-item"},l.a.createElement("h4",{onClick:function(){e.handleAccordion("status")}},l.a.createElement("i",{className:"fa ".concat(u.status?"fa-caret-up":"fa-caret-down")}),"By Status"),l.a.createElement("div",{className:"".concat(u.status?"hide":"")},a.status&&Object.keys(a.status).map(function(t){return l.a.createElement("div",{className:"form-check",key:t},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"status".concat(t),name:t,checked:o[t]||!1,onChange:function(t){return e.handleChange(t,"status")}}),l.a.createElement("label",{className:"form-check-label",htmlFor:"status".concat(t)},a.status[t]))}))),l.a.createElement("div",{className:"filter-item"},l.a.createElement("h4",{onClick:function(){e.handleAccordion("weekday")}},l.a.createElement("i",{className:"fa ".concat(u.weekday?"fa-caret-up":"fa-caret-down")}),"By Weekday"),l.a.createElement("div",{className:"".concat(u.weekday?"hide":"")},a.weekday&&Object.keys(a.weekday).map(function(t){return l.a.createElement("div",{className:"form-check",key:t},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"weekday".concat(t),name:t,checked:f[t]||!1,onChange:function(t){return e.handleChange(t,"weekday")}}),l.a.createElement("label",{className:"form-check-label",htmlFor:"weekday".concat(t)},a.weekday[t]))})))),l.a.createElement("div",{className:"filter-column"},l.a.createElement("div",{className:"filter-item"},l.a.createElement("h4",{onClick:function(){e.handleAccordion("time")}},l.a.createElement("i",{className:"fa ".concat(u.time?"fa-caret-up":"fa-caret-down")}),"By Time"),l.a.createElement("div",{className:"".concat(u.time?"hide":"")},a.time&&Object.keys(a.time).map(function(t){return l.a.createElement("div",{className:"form-check",key:t},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"time".concat(t),name:t,checked:m[t]||!1,onChange:function(t){return e.handleChange(t,"time")}}),l.a.createElement("label",{className:"form-check-label",htmlFor:"time".concat(t)},a.time[t]))}))))),!c&&l.a.createElement("div",{className:"filter-column"},l.a.createElement("div",{className:"filter-item"},l.a.createElement("h4",{onClick:function(){e.handleAccordion("level")}},l.a.createElement("i",{className:"fa ".concat(u.level?"fa-caret-up":"fa-caret-down")}),"By Level"),l.a.createElement("div",{className:"".concat(u.level?"hide":"")},a.level&&Object.keys(a.level).map(function(t){return l.a.createElement("div",{className:"form-check",key:t},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"level".concat(t),name:t,checked:d[t]||!1,onChange:function(t){return e.handleChange(t,"level")}}),l.a.createElement("label",{className:"form-check-label",htmlFor:"level".concat(t)},a.level[t]))})))),l.a.createElement("div",{className:"filter-column"},l.a.createElement("div",{className:"filter-item"},l.a.createElement("h4",{onClick:function(){e.handleAccordion("field")}},l.a.createElement("i",{className:"fa ".concat(u.field?"fa-caret-up":"fa-caret-down")}),"By Field"),l.a.createElement("div",{className:"".concat(u.field?"hide":"")},a.field&&Object.keys(a.field).map(function(t){return l.a.createElement("div",{className:"form-check",key:t},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"field".concat(t),name:t,checked:h[t]||!1,onChange:function(t){return e.handleChange(t,"field")}}),l.a.createElement("label",{className:"form-check-label",htmlFor:"field".concat(t)},a.field[t]))}))))))}}]),t}(n.Component),Y=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).isFilterEmptry=function(e){return Object.keys(e).filter(function(t){return e[t].length>0}).length>0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filters,a=e.definitions,n=e.handleFilterReset;return l.a.createElement(l.a.Fragment,null,this.isFilterEmptry(t),this.isFilterEmptry(t)&&l.a.createElement("div",{className:"filter-view"},l.a.createElement("i",{className:"fa fa-filter"}),Object.keys(t).map(function(e,n){return l.a.createElement("span",{key:"".concat(e).concat(n)},t[e].length>0&&l.a.createElement("span",{key:"".concat(e).concat(n)},e.toUpperCase(),":",t[e].map(function(n,l){return"place"!==e?"".concat(a[e][n]).concat(l!==t[e].length-1?"+":""):n}),"::"))}),l.a.createElement("i",{className:"fa fa-times",onClick:n})))}}]),t}(n.Component),A=(a(359),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleQueryChange=function(e){a.setState({keyword:e.target.value})},a.handleYearChange=function(e){a.setState({year:e.target.value})},a.handleMonthChange=function(e){a.setState({month:e.target.value})},a.handleFilterReset=function(){a.setState({filterReset:!0,events:a.queryEvent,filters:{}},a.resetFilter)},a.handleFiler=function(){a.setState({filterOpen:!a.state.filterOpen},a.processFilter)},a.handleviewOption=function(){a.setState({viewOptionOpen:!a.state.viewOptionOpen},function(){if(a.state.viewOptionOpen){var e={keyword:a.state.keyword,year:a.state.year,month:a.state.month};a.fetchEventsData(e)}})},a.handleOrder=function(e){var t={count:a.state.events.count,events:a.state.events.events.reverse()};a.setState({order:"asc"===a.state.order?"desc":"asc",events:t})},a.handdleSearchAll=function(){var e={keyword:a.state.keyword,year:"all-year",month:"all-month"};a.fetchEventsData(e)},a.handleFind=function(){var e={keyword:a.state.keyword,year:a.state.year,month:a.state.month};a.fetchEventsData(e)},a.changeViewOption=function(){},a.handleCalendarDate=function(e){var t=E()(e).year(),n=E()(e).month()+1;a.fetchEventsData({keyword:a.state.keyword,year:t,month:n}),a.setState({year:t,month:n})},a.state={keyword:"",year:E()().year(),month:E()().month()+1,filterOpen:!1,viewOptionOpen:"false"!==new URL(window.location.href).searchParams.get("m")&&!a.props.isMobile,events:{count:0,events:[]},definitions:[],order:"asc",filters:{},filterReset:!1},a.queryEvent={},setTimeout(function(){a.state.viewOptionOpen||a.handdleSearchAll()},0),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"filterEvents",value:function(e,t){var a={},n={};Object.keys(t).forEach(function(e){t[e].length>0&&(n[e]=t[e])}),a.events=e.events.filter(function(e){var t=!0;return Object.keys(n).forEach(function(a){var l=!1;if("level"===a)l=l||n[a].indexOf(e.topic[a]+"")>=0;else if("field"===a){var r=n[a].filter(function(t){return e.event[a].indexOf(parseInt(t,10))>=0});l=l||r.length>0}else l=l||n[a].indexOf(e.event[a]+"")>=0;t=t&&l}),t}),a.count=a.events.length,this.setState({events:a})}},{key:"resetFilter",value:function(){this.setState({filterReset:!1})}},{key:"processFilter",value:function(){Object.keys(this.state.filters).length>0&&!this.state.filterOpen&&this.filterEvents(this.queryEvent,this.state.filters)}},{key:"componentDidMount",value:function(){document.title="Event List \u6d3b\u52d5\u5217\u8868",document.getElementsByClassName("page-title")[0].innerText="Event List \u6d3b\u52d5\u5217\u8868",document.getElementsByClassName("mobile-page-title")[0].innerText="Event List \u6d3b\u52d5\u5217\u8868",this.fetchData(),this.fetchEventsData({})}},{key:"fetchData",value:function(){var e=this,t=this.props.devMode?"./data/definitions.json":"/v1.0/api/definitions";p.a.get(t).then(function(t){e.setState({definitions:t.data.data})})}},{key:"fetchEventsData",value:function(e){var t,a=this,n="".concat(E()().year(),"-").concat(E()().month()+1),l=e.keyword||"";t="all-year"===e.year||"all-month"===e.month?null:e.year&&e.month?"".concat(e.year,"-").concat(e.month):n;var r=this.props.devMode?"./data/events.json":"/v1.0/api/events";p.a.get(r,{params:{keyword:l,date:t,order:"asc",sort:"date"}}).then(function(e){a.queryEvent=e.data.data,Object.keys(a.state.filters).length>0?a.filterEvents(a.queryEvent,a.state.filters):a.setState({events:e.data.data})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.events,n=t.definitions,r=t.order,i=t.viewOptionOpen,c=t.filters,s=t.filterReset,o=t.filterOpen,m=this.props.isMobile;return l.a.createElement("div",null,l.a.createElement("div",{className:"list-filter ".concat(o?"":"search-button-position")},l.a.createElement(w,{keyword:this.state.keyword,month:this.state.month,year:this.state.year,viewOptionOpen:this.state.viewOptionOpen,handleQueryChange:this.handleQueryChange,handleYearChange:this.handleYearChange,handleMonthChange:this.handleMonthChange,handleFind:this.handleFind,handdleSearchAll:this.handdleSearchAll}),l.a.createElement(q,{definitions:n,filterOpen:o,handleFiler:this.handleFiler,filters:c,filterReset:s}),!m&&l.a.createElement("div",{className:"view-box"},l.a.createElement("div",{className:"view-label"},"\u986f\u793a\u6a21\u5f0f"),l.a.createElement("div",null,l.a.createElement("span",{className:"view-button",onClick:this.handleviewOption},l.a.createElement("i",{className:"fa ".concat(this.state.viewOptionOpen?"fa-calendar-alt":"fa-list-alt")}))))),Object.keys(this.state.filters).length>0&&l.a.createElement(Y,{filters:c,definitions:n,handleFilterReset:this.handleFilterReset}),i&&l.a.createElement(M,{handleCalendarDate:function(t){e.handleCalendarDate(t)},events:a,month:this.state.month,year:this.state.year}),!i&&l.a.createElement(R,{events:a,definitions:n,order:r,handleOrder:this.handleOrder}))}}]),t}(n.Component)),B=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleQueryChange,a=e.handleFind,n=e.keyword;return l.a.createElement("div",{className:"search-box none-event"},l.a.createElement("div",{className:"search-label"},"\u641c\u5c0b"),l.a.createElement(k,{value:n,onChange:t,placeholder:"\u6a19\u984c\u95dc\u9375\u5b57"}),l.a.createElement("div",{className:"search-button none-event"},l.a.createElement("button",{className:"btn pyladies-btn",onClick:a},l.a.createElement("span",{className:"text"},"\u641c\u5c0b\u4e3b\u984c")," ",l.a.createElement("i",{className:"fa fa-search"}))))}}]),t}(n.Component),L=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.topics.topics||[],t=this.props,a=t.definitions,n=t.order,r=t.handleOrder;return l.a.createElement("div",{className:"event-list-view"},l.a.createElement("h2",{className:"search-result"},"\u5171 ",this.props.topics.count," \u7b46\u641c\u5c0b\u7d50\u679c",l.a.createElement("span",{className:"time-order",onClick:r},"asc"===n&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"\u958b\u59cb\u65e5\u671f \u904e\u53bb\u5230\u672a\u4f86"),l.a.createElement("i",{className:"fa fa-caret-up"})),"desc"===n&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"\u958b\u59cb\u65e5\u671f \u672a\u4f86\u5230\u904e\u53bb"),l.a.createElement("i",{className:"fa fa-caret-down"})))),e.map(function(e){return l.a.createElement("section",{className:"event-card",key:e.id},l.a.createElement("header",{className:"event-card-title"},l.a.createElement("h3",null,l.a.createElement("a",{href:"/events/topic.html?id=".concat(e.id),rel:"noopener noreferrer",target:"_blank"},e.name)),l.a.createElement("h2",null,l.a.createElement("a",{href:"/events/event.html?id=".concat(e.id),rel:"noopener noreferrer",target:"_blank"},e.title))),l.a.createElement("article",{className:"event-card-content"},l.a.createElement("p",{className:"sub-title"},a.host[e.host]," -"," ",a.freq[e.freq]),l.a.createElement("p",{className:"sub-title"},a.level&&a.level[e.level]),l.a.createElement("p",{className:"tags"},a.field&&e.fields.map(function(e){return"#"+a.field[e]+" "}))))}))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleQueryChange=function(e){a.setState({keyword:e.target.value})},a.handleFilterReset=function(){a.setState({filterReset:!0,topics:a.queryTopics,filters:{}},a.resetFilter)},a.handleFiler=function(){a.setState({filterOpen:!a.state.filterOpen},a.processFilter)},a.handleOrder=function(e){var t={count:a.state.topics.count,topics:a.state.topics.topics.reverse()};a.setState({order:"asc"===a.state.order?"desc":"asc",topics:t})},a.handleFind=function(){a.handleFilterReset();var e={keyword:a.state.keyword};a.fetchTopicsData(e)},a.state={keyword:"",filterOpen:!1,definitions:[],places:[],order:"asc",filters:{},filterReset:!1,topics:{count:0,topics:[]}},a.queryTopics={},a.queryTopics={count:0,topics:[]},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"filterEvents",value:function(e,t){var a={},n={};Object.keys(t).forEach(function(e){t[e].length>0&&(n[e]=t[e])}),a.topics=e.topics.filter(function(e){var t=!0;return Object.keys(n).forEach(function(a){var l=!1;if("level"===a)l=l||n[a].indexOf(e[a]+"")>=0;else if("field"===a){var r=n[a].filter(function(t){return e.fields.indexOf(parseInt(t,10))>=0});l=l||r.length>0}else l=l||n[a].indexOf(e[a]+"")>=0;t=t&&l}),t}),a.count=a.topics.length,this.setState({topics:a})}},{key:"resetFilter",value:function(){this.setState({filterReset:!1})}},{key:"processFilter",value:function(){Object.keys(this.state.filters).length>0&&!this.state.filterOpen&&this.filterEvents(this.queryTopics,this.state.filters)}},{key:"componentDidMount",value:function(){document.title="Topic List \u4e3b\u984c\u5217\u8868",document.getElementsByClassName("page-title")[0].innerText="Topic List \u4e3b\u984c\u5217\u8868",document.getElementsByClassName("mobile-page-title")[0].innerText="Topic List \u4e3b\u984c\u5217\u8868",this.fetchData(),this.fetchTopicsData()}},{key:"fetchData",value:function(){var e=this,t=this.props.devMode?"./data/definitions.json":"/v1.0/api/definitions";p.a.get(t).then(function(t){e.setState({definitions:t.data.data})})}},{key:"fetchTopicsData",value:function(e){var t=this,a=e&&e.keyword||"",n=this.props.devMode?"./data/topics.json":"/v1.0/api/topics";p.a.get(n,{params:{keyword:a,order:"asc",sort:"date"}}).then(function(e){t.queryTopics=e.data.data,Object.keys(t.state.filters).length>0?t.filterEvents(t.queryTopics,t.state.filters):t.setState({topics:e.data.data})})}},{key:"render",value:function(){var e=this.state,t=e.topics,a=e.definitions,n=e.order,r=e.filters,i=e.filterReset,c=e.filterOpen;return l.a.createElement("div",null,l.a.createElement("div",{className:"list-filter none-event ".concat(c?"":"search-button-position")},l.a.createElement(B,{keyword:this.state.keyword,handleQueryChange:this.handleQueryChange,handleFind:this.handleFind,z:!0,handdleSearchAll:this.handdleSearchAll}),l.a.createElement(q,{isTopicPage:!0,definitions:a,filterOpen:c,handleFiler:this.handleFiler,filters:r,filterReset:i})),Object.keys(this.state.filters).length>0&&l.a.createElement(Y,{filters:r,definitions:a,handleFilterReset:this.handleFilterReset}),l.a.createElement(L,{topics:t,definitions:a,order:n,handleOrder:this.handleOrder}))}}]),t}(n.Component),I=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleQueryChange,a=e.handleFind,n=e.keyword;return l.a.createElement("div",{className:"search-box none-event"},l.a.createElement("div",{className:"search-label"},"\u641c\u5c0b"),l.a.createElement(k,{value:n,onChange:t,placeholder:"\u8b1b\u5e2b\u95dc\u9375\u5b57"}),l.a.createElement("div",{className:"search-button none-event"},l.a.createElement("button",{className:"btn pyladies-btn",onClick:a},l.a.createElement("span",{className:"text"},"\u641c\u5c0b\u8b1b\u5e2b")," ",l.a.createElement("i",{className:"fa fa-search"}))))}}]),t}(n.Component),P=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.speakers.speakers,t=this.props,a=t.definitions;t.order,t.handleOrder;return l.a.createElement("div",{className:"event-list-view"},l.a.createElement("h2",{className:"search-result"},"\u5171 ",this.props.speakers.count," \u7b46\u641c\u5c0b\u7d50\u679c"),l.a.createElement("div",{className:"speaker-list"},e.map(function(e){return l.a.createElement("a",{key:e.id,className:"event-card",href:"/events/speaker.html?id=".concat(e.id),rel:"noopener noreferrer",target:"_blank"},l.a.createElement("section",{key:e.id},l.a.createElement("header",{className:"event-card-title"},l.a.createElement("div",{className:"speaker-image"},l.a.createElement("img",{src:e.photo||"https://tw.pyladies.com/images/logos/twgirl_logo.png",alt:e.name})),l.a.createElement("h3",{className:"speaker-name"},e.name),l.a.createElement("h4",{className:"speaker-title"},e.title)),l.a.createElement("article",{className:"event-card-content"},l.a.createElement("p",{className:"tags"},a.field&&e.fields.map(function(e){return"#"+a.field[e]+" "})))))})))}}]),t}(n.Component),U=(a(361),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleQueryChange=function(e){a.setState({keyword:e.target.value})},a.handleFilterReset=function(){a.setState({filterReset:!0,speakers:a.querySpeakers,filters:{}},a.resetFilter)},a.handleFiler=function(){a.setState({filterOpen:!a.state.filterOpen},a.processFilter)},a.handleFind=function(){a.handleFilterReset();var e={keyword:a.state.keyword};a.fetchSpeakersData(e)},a.state={keyword:"",filterOpen:!1,definitions:[],filters:{},filterReset:!1,speakers:{count:0,speakers:[]}},a.querySpeakers={},a.querySpeakers={count:0,speakers:[]},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"filterspeakers",value:function(e,t){var a={},n={};Object.keys(t).forEach(function(e){t[e].length>0&&(n[e]=t[e])}),a.speakers=e.speakers.filter(function(e){var t=!0;return Object.keys(n).forEach(function(a){var l=!1;if("field"===a){var r=n[a].filter(function(t){return e.fields.indexOf(parseInt(t,10))>=0});l=l||r.length>0}else l=l||n[a].indexOf(e[a]+"")>=0;t=t&&l}),t}),a.count=a.speakers.length,this.setState({speakers:a})}},{key:"resetFilter",value:function(){this.setState({filterReset:!1})}},{key:"processFilter",value:function(){Object.keys(this.state.filters).length>0&&!this.state.filterOpen&&this.filterspeakers(this.querySpeakers,this.state.filters)}},{key:"componentDidMount",value:function(){document.title="Speaker List \u8b1b\u5e2b\u5217\u8868",document.getElementsByClassName("page-title")[0].innerText="Speaker List \u8b1b\u5e2b\u5217\u8868",document.getElementsByClassName("mobile-page-title")[0].innerText="Speaker List \u8b1b\u5e2b\u5217\u8868",this.fetchData(),this.fetchSpeakersData()}},{key:"fetchData",value:function(){var e=this,t=this.props.devMode?"./data/definitions.json":"/v1.0/api/definitions";p.a.get(t).then(function(t){e.setState({definitions:t.data.data})})}},{key:"fetchSpeakersData",value:function(e){var t=this,a=e&&e.keyword||"",n=this.props.devMode?"./data/speakers.json":"/v1.0/api/speakers";p.a.get(n,{params:{keyword:a}}).then(function(e){t.querySpeakers=e.data.data,Object.keys(t.state.filters).length>0?t.filterspeakers(t.querySpeakers,t.state.filters):t.setState({speakers:e.data.data})})}},{key:"render",value:function(){var e=this.state,t=e.speakers,a=e.definitions,n=e.filters,r=e.filterReset,i=e.filterOpen;return l.a.createElement("div",null,l.a.createElement("div",{className:"list-filter none-event ".concat(i?"":"search-button-position")},l.a.createElement(I,{keyword:this.state.keyword,handleQueryChange:this.handleQueryChange,handleFind:this.handleFind,handdleSearchAll:this.handdleSearchAll}),l.a.createElement(q,{isSpeakerPage:!0,definitions:a,filterOpen:i,handleFiler:this.handleFiler,filters:n,filterReset:r})),Object.keys(this.state.filters).length>0&&l.a.createElement(Y,{filters:n,definitions:a,handleFilterReset:this.handleFilterReset}),l.a.createElement(P,{speakers:t,definitions:a}))}}]),t}(n.Component));a(363);i.a.render(l.a.createElement(function(){var e=window.innerWidth<768;return l.a.createElement(c.a,null,l.a.createElement(s.c,null,l.a.createElement(s.a,{path:"/events"},l.a.createElement(A,{devMode:!0,isMobile:e})),l.a.createElement(s.a,{path:"/topics"},l.a.createElement(Q,{devMode:!0})),l.a.createElement(s.a,{path:"/speakers"},l.a.createElement(U,{devMode:!0})),l.a.createElement(s.a,{path:"/eventlist/events"},l.a.createElement(A,{devMode:!1,isMobile:e})),l.a.createElement(s.a,{path:"/eventlist/topics"},l.a.createElement(Q,{devMode:!1})),l.a.createElement(s.a,{path:"/eventlist/speakers"},l.a.createElement(U,{devMode:!1}))))},null),document.getElementById("root"))}},[[156,2,1]]]);
//# sourceMappingURL=main.44ee5a97.chunk.js.map